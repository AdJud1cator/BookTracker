{% extends 'base_member.html' %}

{% block title %}Community - BookTracker{% endblock %}

{% block head %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/community.css') }}">

{% endblock %}

{% block content %}
<div class="container my-5 p-4 rounded shadow-sm bg-body" style="max-width:900px;">
    <h2 class="fw-semibold mb-4">Community</h2>

    <!-- Share Card -->
    <div class="community-card position-relative mb-4">
        <div class="section-title" style="margin-top:0;">Share a Book</div>
        <form id="shareForm" autocomplete="off">
            <div class="mb-3 position-relative" style="z-index:12;">
                <label for="bookSearchInput" class="form-label">Book from your library</label>
                <input type="text" id="bookSearchInput" class="form-control" placeholder="Type to search..."
                    autocomplete="off" required>
                <div id="bookSuggestions" class="autocomplete-list" style="display:none;"></div>
            </div>
            <div class="mb-3">
                <label>Status</label>
                <div id="statusDisplay" class="fw-semibold text-primary"></div>
            </div>
            <div class="mb-3 position-relative" style="z-index:11;">
                <label for="userSearchInput" class="form-label">Share with (username)</label>
                <input type="text" id="userSearchInput" class="form-control" placeholder="e.g. alice" required>
                <div id="userSuggestions" class="autocomplete-list" style="display:none;"></div>
            </div>
            <button type="submit" class="btn btn-primary">Share</button>
            <div id="shareMsg" class="mt-2"></div>
        </form>
    </div>

    <!-- Feed Card -->
    <div class="community-card">
        <div class="section-title" style="margin-top:0;">Your News Feed</div>
        <div id="communityLoadingBar" style="display:none; text-align:center; margin:2rem 0;">
            <div class="spinner-border text-primary" role="status" style="width:2.5rem; height:2.5rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <div id="feedList" class="feed-list"></div>
        <div id="feedPagination" class="feed-pagination"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}

<script src="{{ url_for('static', filename='js/community.js') }}"></script>

{% endblock %}