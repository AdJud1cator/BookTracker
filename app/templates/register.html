<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
    <meta charset="UTF-8" />
    <title>Sign Up - BookTracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous" />

    <!-- Custom styles -->
    <link rel="stylesheet" href="../static/css/styles.css" />
</head>

<body class="bg-body">
    <!-- Centered container -->
    <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center">
        <div class="container p-4 rounded shadow-sm bg-body" style="max-width: 480px;">
            <div class="text-center mb-4">
                <h2 class="fw-semibold text-primary">Create Your BookTracker Account</h2>
                <p class="text-muted mb-0">Start your reading journey today!</p>
            </div>

            <form method="post" action="{{ url_for('main.register') }}">
                <div class="mb-3">
                    <label for="email" class="form-label fw-semibold">Email address</label>
                    <input type="email" class="form-control form-control-lg" id="email" name="email"
                        placeholder="you@email.com" required>
                </div>
                <div class="mb-3">
                    <label for="username" class="form-label fw-semibold">Username</label>
                    <input type="text" class="form-control form-control-lg" id="username" name="username"
                        placeholder="Choose a username" required>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label fw-semibold">Password</label>
                    <input type="password" class="form-control form-control-lg" id="password" name="password"
                        placeholder="Password" required>
                </div>
                <div class="mb-3">
                    <label for="confirm_password" class="form-label fw-semibold">Confirm Password</label>
                    <input type="password" class="form-control form-control-lg" id="confirm_password"
                        name="confirm_password" placeholder="Confirm Password" required>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" value="agree" id="terms" name="terms" required>
                    <label class="form-check-label" for="terms">
                        I agree to the
                        <a href="{{ url_for('main.terms') }}" target="_blank"
                            class="text-primary text-decoration-underline">Terms &amp; Conditions</a>
                    </label>
                </div>
                <div class="d-grid mb-3">
                    <button type="submit" class="btn btn-primary btn-lg">Sign Up</button>
                </div>
            </form>

            <div class="text-center mt-3">
                <span class="text-muted">Already have an account?</span>
                <a href="{{ url_for('main.login') }}" class="text-primary fw-semibold ms-1">Sign In</a>
            </div>
        </div>
        <!-- Footer -->
        <footer class="text-center text-muted mt-5 mb-3 small w-100">
            <div class="mb-2">
                <a href="https://www.facebook.com/" class="text-decoration-none text-primary mx-2">Facebook</a> ·
                <a href="https://www.x.com/" class="text-decoration-none text-primary mx-2">Twitter</a> ·
                <a href="https://www.instagram.com/" class="text-decoration-none text-primary mx-2">Instagram</a>
            </div>
            <div class="mb-2">
                <a href="#" id="darkModeToggleLink" class="text-decoration-none text-primary mx-2"><span
                        id="darkModeStatus">Dark Mode</span></a> ·
                <a href="{{ url_for('main.contact') }}" class="text-decoration-none text-primary mx-2">Contact</a>
            </div>
            <div>
                <a href="{{ url_for('main.terms') }}" class="text-decoration-none text-primary mx-2">Terms & Conditions</a> ·
                <a href="{{ url_for('main.policy') }}" class="text-decoration-none text-primary mx-2">Privacy Policy</a> ·
                <a href="{{ url_for('main.copyright') }}" class="text-decoration-none text-primary mx-2">Copyright</a>
            </div>
        </footer>
    </div>

    {% if error %}
    <script>
        Swal.fire({
            icon: 'error',
            title: 'Registration Failed',
            text: '{{ error }}'
        });
    </script>
    {% endif %}
    {% if success %}
    <script>
        Swal.fire({
            icon: 'success',
            title: 'Registration Successful',
            text: '{{ success }}',
            timer: 2000,
            showConfirmButton: false
        }).then(() => {
            window.location.href = "{{ url_for('main.login') }}";
        });
        // Also auto-redirect in case user doesn't click
        setTimeout(function () {
            window.location.href = "{{ url_for('main.login') }}";
        }, 2000);
    </script>
    {% endif %}


    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>

    <!-- Dark Mode Toggle Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const html = document.documentElement;
            const toggleLink = document.getElementById('darkModeToggleLink');
            const status = document.getElementById('darkModeStatus');

            // Load saved theme or default to light
            const savedTheme = localStorage.getItem('bsTheme') || 'light';
            html.setAttribute('data-bs-theme', savedTheme);
            status.textContent = savedTheme === 'dark' ? 'Light Mode' : 'Dark Mode';

            toggleLink.addEventListener('click', e => {
                e.preventDefault();
                const currentTheme = html.getAttribute('data-bs-theme');
                if (currentTheme === 'dark') {
                    html.setAttribute('data-bs-theme', 'light');
                    localStorage.setItem('bsTheme', 'light');
                    status.textContent = 'Dark Mode';
                } else {
                    html.setAttribute('data-bs-theme', 'dark');
                    localStorage.setItem('bsTheme', 'dark');
                    status.textContent = 'Light Mode';
                }
            });
        });
    </script>
</body>

</html>