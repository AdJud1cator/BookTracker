{% extends "base_member.html" %}

{% block title %}Book Details - BookTracker{% endblock %}

{% block head %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/book_details.css') }}">

{% endblock %}

{% block content %}
<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay">
  <div class="loading-spinner"></div>
</div>

<div id="detailsCard" class="book-details-card shadow-sm bg-body" data-googleid="{{ googleid }}" style="opacity:0; pointer-events:none;">
  <!-- Close Button -->
  <a href="{{ request.referrer or url_for('main.homepage') }}" class="btn-close position-absolute"
    style="top: 1.3rem; right: 1.3rem;" aria-label="Back" title="Back"></a>

  <div class="book-details-flex mb-4">
    <img id="bookCover" class="book-details-cover" src="" alt="Book cover">
    <div class="book-details-meta">
      <h2 id="bookTitle"></h2>
      <div class="meta-item"><span class="meta-label">Authors:</span> <span id="bookAuthors"></span></div>
      <div class="meta-item"><span class="meta-label">Publisher:</span> <span id="bookPublisher"></span></div>
      <div class="meta-item"><span class="meta-label">Published:</span> <span id="bookPublished"></span></div>
      <div class="meta-item"><span class="meta-label">Page Count:</span> <span id="bookPages"></span></div>
      <div class="meta-item"><span class="meta-label">Categories:</span> <span id="bookCategories"></span></div>
      <div class="meta-item book-details-rating">
        <span class="meta-label">Rating:</span>
        <span id="bookRating"></span>
        <small id="ratingsCount" class="text-muted"></small>
      </div>
      <div class="meta-item"><span class="meta-label">ISBN:</span> <span id="bookISBN"></span></div>
    </div>
  </div>
  <hr>
  <div class="mb-4">
    <h5 class="fw-semibold mb-2">Add to your Library</h5>
    <div class="status-btn-group btn-group" role="group" aria-label="Reading status">
      <button type="button" class="btn btn-outline-primary" onclick="setStatus('currently_reading')">Currently
        Reading</button>
      <button type="button" class="btn btn-outline-success" onclick="setStatus('completed')">Completed</button>
      <button type="button" class="btn btn-outline-secondary" onclick="setStatus('wishlist')">Wishlist</button>
    </div>
    <div id="statusMessage" class="mt-3"></div>
  </div>
  <div class="mb-3">
    <h5 class="fw-semibold mb-2">Description</h5>
    <div id="bookDescription" style="white-space: pre-line; font-size:1.04rem;"></div>
  </div>
  <a id="previewLink" href="#" target="_blank" class="btn btn-link px-0">Preview on Google Books</a>
</div>
{% endblock %}

{% block scripts %}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{{ url_for('static', filename='js/details.js') }}"></script>

{% endblock %}